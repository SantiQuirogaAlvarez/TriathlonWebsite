---
const images = [
  "/TriathlonWebsite/images/CuTriImage1.jpeg",
  "/TriathlonWebsite/images/CuTriImage3.jpeg",
  "/TriathlonWebsite/images/CuTriImage4.jpeg",
];

const title = "CU Triathlon Team";
---

<div class="relative w-full overflow-hidden">
  <div id="slides" class="flex transition-transform duration-700 ease-in-out">
    {images.map((src) => (
      <div class="shrink-0 w-full h-[70vh] md:h-[90vh] relative">
        <img src={src} alt="Slideshow image" class="w-full h-full object-cover" />
        <div class="absolute inset-0 flex items-center justify-center bg-black/40">
          <h1 class="text-white text-3xl md:text-5xl font-bold text-center">
            {title}
          </h1>
        </div>
      </div>
    ))}
  </div>

  <button
    id="prevBtn"
    class="absolute top-1/2 left-4 -translate-y-1/2 bg-black/40 text-white p-2 rounded-full hover:bg-black/60"
  >
    &#10094;
  </button>

  <button
    id="nextBtn"
    class="absolute top-1/2 right-4 -translate-y-1/2 bg-black/40 text-white p-2 rounded-full hover:bg-black/60"
  >
    &#10095;
  </button>

  <!-- Dots -->
  <div id="dots" class="absolute bottom-5 left-0 right-0 flex justify-center gap-2">
    {images.map((_, i) => (
      <button
        class="dot w-3 h-3 rounded-full bg-gray-400/60"
        data-index={i}
      />
    ))}
  </div>
</div>

<script>
  const slides = document.getElementById("slides");
  const dots = document.querySelectorAll(".dot");
  const totalSlides = 3; 
  let currentIndex = 0;
  const intervalTime = 5000;

  function updateSlide() {  
    if(slides) {
        slides.style.transform = `translateX(-${currentIndex * 100}%)`;
        dots.forEach((dot, i) =>
        dot.classList.toggle("bg-white", i === currentIndex)
    );
    }
  }

  function nextSlide() {
    currentIndex = (currentIndex + 1) % totalSlides;
    updateSlide();
  }

  function prevSlide() {
    currentIndex = (currentIndex - 1 + totalSlides) % totalSlides;
    updateSlide();
  }

  const nextBtn = document.getElementById("nextBtn");
  const prevBtn = document.getElementById("prevBtn");
  if(nextBtn && prevBtn){
    nextBtn.addEventListener("click", nextSlide);
    prevBtn.addEventListener("click", prevSlide);
  }
  dots.forEach((dot) =>
  dot.addEventListener("click", (e) => {
    const target = e.target as HTMLElement;
    if (target && target.dataset.index !== undefined) {
      currentIndex = parseInt(target.dataset.index!);
      updateSlide();
    }
  })
);

  // Auto-play
  setInterval(nextSlide, intervalTime);

  // Initialize
  updateSlide();
</script>
